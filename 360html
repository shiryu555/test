<!DOCTYPE html>
<html>
<head>
    <title>360度画像ビューア</title>
    <style>
        body { margin: 0; }
        canvas { width: 100%; height: 100% }
    </style>
</head>
<body>
    <!-- Three.jsのライブラリを読み込む -->
    <script src="https://threejs.org/build/three.js"></script>

    <script>
        // グローバル変数
        var scene, camera, renderer;
        var imageIndex = 0;
        var images = ['360eample.jpg', 'image2.jpg']; // ローカルの360度画像のリスト

        // Three.jsのシーンを初期化する関数
        function init() {
            var width = window.innerWidth;
            var height = window.innerHeight;

            // シーンを作成
            scene = new THREE.Scene();

            // カメラを作成
            camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            camera.position.z = 1;

            // レンダラーを作成
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(width, height);
            document.body.appendChild(renderer.domElement);

            // 360度画像をテクスチャとして読み込む
            var textureLoader = new THREE.TextureLoader();
            textureLoader.load(images[imageIndex], function(texture) {
                // テクスチャを使用して球体ジオメトリを作成
                var sphereGeometry = new THREE.SphereGeometry(500, 60, 40);
                sphereGeometry.scale(-1, 1, 1); // 球体ジオメトリを反転

                var sphereMaterial = new THREE.MeshBasicMaterial({
                    map: texture
                });

                var sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
                scene.add(sphere);

                animate();
            });

            // ボタンを作成
            var button = document.createElement('button');
            button.innerHTML = '次の画像';
            button.style.position = 'absolute';
            button.style.top = '20px';
            button.style.left = '20px';
            button.addEventListener('click', function() {
                // ボタンがクリックされたら次の画像に切り替える
                imageIndex++;
                if (imageIndex >= images.length) {
                    imageIndex = 0;
                }
                init(); // シーンを再初期化
            });
            document.body.appendChild(button);
        }

        // アニメーションループ
        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        init(); // 初期化関数を呼び出す
    </script>
</body>
</html>
